{% extends 'layout.html' %}
{% block title %}User{% endblock %}
{% block content %}
    <h2>User Information</h2>
        {% if employee %}
            {% for user in employee %}
                <div>
                    <table>
                        <tr>
                            <td>Lastname:</td>
                            <td>{{ user.lastname }}</td>
                        </tr>
                        <tr>
                            <td>Firstname:</td>
                            <td>{{ user.firstname }}</td>
                        </tr>
                        <tr>
                            <td>Department:</td>
                            <td>{{ user.department }}</td>
                        </tr>
                        <tr>
                            <td>Age:</td>
                            <td>{{ user.age }}</td>
                        </tr>
                        <tr>
                            <td>Phone Number:</td>
                            <td>{{ user.phone_no }}</td>
                        </tr>
                        <tr>
                            <td>Email:</td>
                            <td>{{ user.email }}</td>
                        </tr>
                        <tr>
                            <td>Address:</td>
                            <td>{{ user.address }}</td>
                        </tr>
                    </table>
                    <tr>
                        <button type="button" class="btn" onclick="showPopup()">Add</button>
                        <button type="button" class="btn1" onclick="showPopup()">Fixed</button>
                        <button type="button" class="btn2" onclick="showDeletePopup(1)">Delete</button>
                    </tr>

                    <div class="popup" id="popup">
                        <div class="popup-content">
                            <p>Are you sure you want to delete?</p>
                            <button class="ok-btn" >OK</button>
                            <button class="cancel-btn" onclick="hidePopup()">Cancel</button>
                            <button class="close-btn" onclick="hidePopup()" >x</button>
                        </div>
                    </div>
                    <script type="text/javascript">
		                var popup = document.getElementById("popup");
                        function showPopup() {
                            popup.style.display = "block";
                        }
                        function showDeletePopup() {
                            var xhr = new XMLHttpRequest();
                            xhr.open("POST", "/delete_account", true);
                            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                            xhr.onreadystatechange = function() {
                                if (this.readyState === XMLHttpRequest.DONE && this.status === 200) {
                                    alert(this.responseText);
                                }
                            }
                            xhr.send("id=" + id);
                        }
                        function hidePopup() {
                            popup.style.display = "none";
                        }
	                </script>
                </div>
            {% endfor %}
        {% else %}
            <p>No user found.</p>
        {% endif %}
{% endblock %}
